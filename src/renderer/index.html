<!doctype html>
<html lang="en">
	<head>
		<meta charset="UTF-8" />
		<meta
			http-equiv="Content-Security-Policy"
			content="default-src 'self'; script-src 'self'; style-src 'self' 'unsafe-inline' https://fonts.googleapis.com; font-src 'self' https://fonts.gstatic.com; img-src 'self' data: https: blob:; connect-src 'self' https: wss: ws:; worker-src 'self' blob:; media-src 'self' blob:;"
		/>
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<title>Maestro - Agent Orchestration Command Center</title>

		<!-- Preload fonts to prevent FOUT (Flash of Unstyled Text) -->
		<link rel="preconnect" href="https://fonts.googleapis.com" crossorigin />
		<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
		<link
			rel="preload"
			href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;500;600;700&display=swap"
			as="style"
		/>
		<link
			href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;500;600;700&display=swap"
			rel="stylesheet"
		/>

		<!-- Critical CSS for splash screen - inline to prevent FOUC -->
		<style>
			/* Reset and base styles */
			* {
				margin: 0;
				padding: 0;
				box-sizing: border-box;
			}

			html,
			body,
			#root {
				width: 100%;
				height: 100%;
				overflow: hidden;
			}

			body {
				font-family: 'JetBrains Mono', 'Fira Code', 'Courier New', monospace;
				-webkit-font-smoothing: antialiased;
				-moz-osx-font-smoothing: grayscale;
				background-color: #1a1a2e;
			}

			/* Initial splash screen styles */
			#initial-splash {
				position: fixed;
				inset: 0;
				display: flex;
				align-items: center;
				justify-content: center;
				z-index: 9999;
				background-color: #1a1a2e;
				transition: opacity 0.5s ease-out;
				/* Account for 40px title bar (pt-10) so content aligns with app layout */
				padding-top: 40px;
				box-sizing: border-box;
			}

			#initial-splash.hidden {
				opacity: 0;
				pointer-events: none;
			}

			.splash-container {
				display: flex;
				flex-direction: column;
				align-items: center;
				gap: 32px;
			}

			.splash-logo {
				width: 180px;
				height: 180px;
				border-radius: 24px;
				box-shadow: 0 25px 50px -12px rgba(139, 92, 246, 0.4);
				overflow: hidden;
			}

			.splash-logo img {
				width: 100%;
				height: 100%;
				object-fit: cover;
			}

			.splash-title {
				font-family: 'JetBrains Mono', 'Fira Code', 'Courier New', monospace;
				font-weight: 700;
				font-size: 36px;
				letter-spacing: 0.25em;
				color: #ffffff;
				text-shadow: 0 2px 10px rgba(139, 92, 246, 0.3);
			}

			.splash-progress-container {
				width: 280px;
				height: 6px;
				background-color: rgba(255, 255, 255, 0.1);
				border-radius: 9999px;
				overflow: hidden;
				position: relative;
			}

			.splash-progress-bar {
				position: absolute;
				top: 0;
				left: 0;
				height: 100%;
				border-radius: 9999px;
				background: linear-gradient(90deg, #8b5cf6 0%, #a78bfa 50%, #c4b5fd 100%);
				box-shadow: 0 0 10px rgba(139, 92, 246, 0.5);
				transition: width 0.15s ease-out;
				width: 0%;
			}

			.splash-text {
				font-family: 'JetBrains Mono', 'Fira Code', 'Courier New', monospace;
				font-size: 14px;
				letter-spacing: 0.05em;
				color: rgba(255, 255, 255, 0.5);
			}
		</style>
	</head>
	<body>
		<!-- Initial splash screen shown immediately while React loads -->
		<div id="initial-splash">
			<div class="splash-container">
				<!-- Logo container with app icon -->
				<div class="splash-logo">
					<img src="/icon.png" alt="Maestro" />
				</div>

				<!-- Maestro title -->
				<h1 class="splash-title">MAESTRO</h1>

				<!-- Progress bar -->
				<div class="splash-progress-container">
					<div id="splash-progress" class="splash-progress-bar"></div>
				</div>

				<!-- Loading text -->
				<p id="splash-text" class="splash-text">Loading...</p>
			</div>
		</div>

		<div id="root"></div>

		<!-- Splash screen progress animation (external for CSP compliance) -->
		<script src="./splash.js"></script>

		<!-- React DevTools: connects to standalone react-devtools app (dev mode only) -->
		<script src="./devtools-connect.js"></script>

		<script type="module" src="/main.tsx"></script>
	</body>
</html>
